The C code provided by the Affirmative side is correct.
