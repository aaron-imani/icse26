The revised C code provided by the negative side is the correct translation of the Java code.
